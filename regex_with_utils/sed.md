- sed 的执行顺序

```c
1/
     读取一行到 模式空间 ,可以从标准 输入读, 可以从文件读 

2/
     到模式空间执行命令 ,命令可以放到命令集,也可以放到文件中

3/
     打印模式空间中的内容 ,注意,模式空间中的内容已经改变,但是源文件或者 标准输入的内容没变

4/
     清空模式空间的内容

5/
     跳转到1
```


- 过程1 读取一行到模式空间
```c

1/ 从标准输入
     cat testfile | sed -n 'p'
2/ 从文件
     sed -n 'p' testfile

```


- 过程2 在模式空间 执行命令
```c
注意:
     每一行都要执行这条命令,我们可以针对每一行做一样的动作,也可以做不同的动作
     另外,命令执行的对象都是模式空间中的内容,不是文件中的内容
     模式空间应该是内存里面的内容
     另外,删除后面的命令无法操作对象,因为对象已经被删除了


```




- 过程3 打印模式空间的内容

```c
默认打印模式空间中所有的内容
即每次循环都默认无条件打印

可以指定打印
1/
     -n 屏蔽默认输出
2/
     用命令 p 打印指定输出

如何指定输出
1/ 行数指定
     'p'       无条件打印行
     '2 p'     如果是第二行,才打印
     '1,4 p'   如果是1到4行,才打印
     '2,$ p'   如果是2到最后一行,才打印
     '1,+3 p'  打印 1 2 3 行
     '1~3 p'   打印 1 4 7 ... 行
2/ 模式匹配
     '/picqiu/,9 p'  效果是打印 9 - picqiu 或者 picqiu 到 9 行,如果匹配不到,打印 9 - $
     

```

- 过程4 清空模式空间中的内容

```c


```


---

### 命令

- 所有命令的格式

```c
如果写在命令行中,要用 '' 或者 "" 或者 \ 来放置 shell 解释

一般写的时候,都是这么写

'[range] command [params]'

range 部分 用来 匹配行
command 部分 是命令
params 部分 是命令的参数


[] 代表可以省略


```


- 打印

```c
默认打印模式空间中所有的内容到标准输出
即每次循环都默认无条件打印

可以指定打印
1/
     -n 屏蔽默认输出
2/
     用命令 p 打印指定输出

如何指定输出
1/ 行数指定
     'p'       无条件打印行
     '2 p'     如果是第二行,才打印
     '1,4 p'   如果是1到4行,才打印
     '2,$ p'   如果是2到最后一行,才打印
     '1,+3 p'  打印 1 2 3 行
     '1~3 p'   打印 1 4 7 ... 行
2/ 模式匹配
     '/picqiu/,9 p'  效果是打印 9 - picqiu 或者 picqiu 到 9 行,如果匹配不到,打印 9 - $

```

- 删除

```c

'd' 无条件删除行

'/^#/ d' 以#开头,则删除


```

- 写文件

```c

-n 关闭默认输出

'w output.txt'

'/picqiu/,$ w output.txt'


```

- 替换

```c

替换也符合上面的模式,只不过复杂一点

替换的 command 部分 是 s
替换的 params 部分 是 /original-string/replacement-string/[substitute-flags]

substitute-flags 
     不加的情况下为默认情况,只替换 匹配的一行中 第一次出现的 original-string 
     g 替换 匹配的一行中 出现的 所有的 original-string
     1 只替换 匹配的一行中 第 1 次出现的 original-string
     2 只替换 匹配的一行中 第 2 次出现的 original-string

     p 替换成功后打印,没有替换不打印
     w output.txt 替换成功后保存,没有替换不保存
     e 替换成功后 将 模式空间中的 字符串 在 shell 中执行

     i 忽略大小写匹配



     另外:
     这些 substitute-flags 可以 自由组合


     gp 只替换 匹配的一行中 出现的 所有的 original-string,替换成功后并打印,没有替换不打印

replacement-string
     可以用 &替代 匹配成功 的 original-string 

分组替换
     

```

